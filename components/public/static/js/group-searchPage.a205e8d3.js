(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-searchPage"],{"129f":function(t,s){t.exports=Object.is||function(t,s){return t===s?0!==t||1/t===1/s:t!=t&&s!=s}},"177b":function(t,s,e){"use strict";e("7af3")},"1c00":function(t,s,e){},"260f":function(t,s,e){"use strict";e("1c00")},"3c6c":function(t,s,e){"use strict";var i=e("2b0e");s["a"]=new i["a"]},"67be":function(t,s,e){"use strict";e("949b")},"79f7":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{style:[t.playList?{paddingBottom:"1rem"}:{}]},[e("search-inp",{ref:"search",attrs:{page:"search",Right:"1rem"}}),e("history",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]}),e("hot-search",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],on:{returnKey:t.setKey,childFn:t.parentFn}}),t.loading?e("page-loading"):t._e()],1)},n=[],a=e("5530"),o=(e("841c"),e("ac1f"),e("f5fc")),r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.history.length?e("div",{staticClass:"history pd23"},[e("div",{staticClass:"history-title"},[e("span",[t._v("历史记录")]),e("i",{staticClass:"search iconlajitong",on:{click:t.clearHistory}})]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"container"},[e("ul",{staticClass:"icons-group"},t._l(t.history,(function(s,i){return e("li",{key:i,staticClass:"icon-list",on:{click:function(e){return t.toSearch(s)}}},[t._v(t._s(s))])})),0)])])]):t._e()},c=[],u=e("3c6c"),h={name:"history",data:function(){return{history:history}},created:function(){this.getHistory()},methods:{getHistory:function(){var t=this;u["a"].$on("history",(function(s){t.history=s,console.log(s)}))},clearHistory:function(){localStorage.removeItem("keys"),this.history=[]},toSearch:function(t){u["a"].$emit("search",t)}}},l=h,f=(e("177b"),e("2877")),d=Object(f["a"])(l,r,c,!1,null,"7d3ebf15",null),p=d.exports,y=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"song-hot-search"},[e("p",{staticClass:"hot-search-title"},[t._v("热搜榜")]),e("ul",t._l(t.hotSearchList,(function(s,i){return e("li",{key:i,staticClass:"hot-search-list",on:{click:function(e){return t.returnKey(s.searchWord)}}},[e("span",{staticClass:"num"},[t._v(t._s(i+1))]),e("div",{staticClass:"song-info"},[e("div",{staticClass:"song-info-title"},[e("p",{staticClass:"song-name"},[t._v(t._s(s.searchWord))]),e("span",{staticClass:"num"},[t._v(t._s(s.score))]),s.iconUrl?e("img",{staticClass:"search-png",attrs:{src:s.iconUrl}}):t._e()]),e("div",{staticClass:"song-Introduced"},[t._v(t._s(s.content))])])])})),0)])},g=[],v=e("365c"),m={name:"hotSearch",data:function(){return{hotSearchList:[]}},created:function(){this._getList()},methods:{_getList:function(){var t=this;v["a"].hotSearchListFn().then((function(s){var e=s.data;200===e.code&&(t.hotSearchList=e.data,t.$emit("childFn",!1))})).catch((function(t){console.log(t)}))},returnKey:function(t){this.$emit("returnKey",t)}}},w=m,k=(e("ff96"),Object(f["a"])(w,y,g,!1,null,"ae269d34",null)),_=k.exports,C=e("9a9b"),L=e("2f62"),b={name:"search",data:function(){return{hotSearchKey:"",loading:!0}},components:{searchInp:o["a"],history:p,hotSearch:_,pageLoading:C["a"]},methods:{setKey:function(t){t&&this.$refs.search.searchKey(t)},parentFn:function(t){this.loading=t}},computed:Object(a["a"])({},Object(L["c"])({playList:"PLAY_LIST"}))},S=b,x=(e("a66f"),Object(f["a"])(S,i,n,!1,null,"9668ab6e",null));s["default"]=x.exports},"7af3":function(t,s,e){},"841c":function(t,s,e){"use strict";var i=e("d784"),n=e("825a"),a=e("1d80"),o=e("129f"),r=e("14c3");i("search",1,(function(t,s,e){return[function(s){var e=a(this),i=void 0==s?void 0:s[t];return void 0!==i?i.call(s,e):new RegExp(s)[t](String(e))},function(t){var i=e(s,t,this);if(i.done)return i.value;var a=n(t),c=String(this),u=a.lastIndex;o(u,0)||(a.lastIndex=0);var h=r(a,c);return o(a.lastIndex,u)||(a.lastIndex=u),null===h?-1:h.index}]}))},"8d43":function(t,s,e){},"949b":function(t,s,e){},"9a9b":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container"},[e("div",{staticClass:"page-loading"},[e("span",{staticClass:"span"}),e("span",{staticClass:"span"}),e("span",{staticClass:"span"}),e("span",{staticClass:"span"})]),t._v("努力加载中... ")])}],a={name:"pageLoading"},o=a,r=(e("67be"),e("2877")),c=Object(r["a"])(o,i,n,!1,null,"545c0b8e",null);s["a"]=c.exports},a66f:function(t,s,e){"use strict";e("8d43")},df01:function(t,s,e){},f5fc:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper pd23"},[e("i",{staticClass:"iconfont zuojiantou",on:{click:t.returnPage}}),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keywords,expression:"keywords",modifiers:{trim:!0}}],ref:"inp",staticClass:"search",attrs:{type:"text",placeholder:t.placeholder,autofocus:"autofocus"},domProps:{value:t.keywords},on:{focus:t.displayList,input:function(s){s.target.composing||(t.keywords=s.target.value.trim())},blur:function(s){return t.$forceUpdate()}}}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.keywords,expression:"keywords"}],staticClass:"iconfont guanbi",style:{right:t.Right},on:{click:t.clearInp}}),t.page?e("i",{staticClass:"iconfont geshou",on:{click:t.goSingerPage}}):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"floatInfo"},[e("ul",[e("li",{staticClass:"blue border-bottom",on:{click:function(s){return t.searchKey(t.keywords)}}},[t._v(" 搜索 "),e("span",{staticClass:"text"},[t._v('"'+t._s(t.keywords)+'"')])]),t._l(t.searchList,(function(s,i){return e("li",{key:i,staticClass:"border-bottom",on:{click:function(e){return t.searchKey(s.keyword)}}},[e("i",{staticClass:"iconfont sousuo"}),t._v(" "+t._s(s.keyword)+" ")])}))],2)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"mask",on:{click:t.hideList}})])},n=[],a=(e("1276"),e("ac1f"),e("4de4"),e("365c")),o=e("3c6c"),r={name:"searchInp",props:{page:{type:String},Right:{default:"0.23rem"},keyword:{type:String,default:""}},data:function(){return{searchList:[],keywords:"",showList:!1,time:null,placeholder:""}},created:function(){console.log("我是input的create"),this.changFocus(),this._getPlaceholder(),this.historySearch()},mounted:function(){this.setHistory()},watch:{keywords:function(t,s){this.keywords!==this.keyword&&this.keywords.length>0?this.displayList():this.hideList()},keyword:{immediate:!0,handler:function(t,s){t&&(this.keywords=t)}}},methods:{setKeyword:function(){this.keyword&&(this.keywords=this.keyword)},goSingerPage:function(){this.$router.push("/singer")},historySearch:function(){var t=this;o["a"].$on("search",(function(s){t.searchKey(s)}))},clearInp:function(){this.keywords=""},changFocus:function(){var t=this;this.keyword||this.$nextTick((function(s){t.$refs.inp.focus()}))},returnPage:function(){this.$router.go(-1)},_getPlaceholder:function(){var t=this;a["a"].defaultSearchFn().then((function(s){var e=s.data;200===e.code&&(t.placeholder=e.data.showKeyword)}))},hideList:function(){this.showList=!1},displayList:function(){this.keywords&&(this.showList=!0,this.setSearchList(this.keywords))},_getSuggestList:function(t){var s=this;a["a"].suggestSearchFn(t).then((function(t){var e=t.data;200===e.code&&(s.searchList=e.result.allMatch)}))},setSearchList:function(t){var s=this;this.time&&(clearTimeout(this.time),this.time=null),this.time=setTimeout((function(){s._getSuggestList(t)}),50)},setHistory:function(t){var s=localStorage.getItem("keys")?localStorage.getItem("keys").split(","):[];t&&(s.unshift(t),s=this.unique(s),localStorage.setItem("keys",s)),o["a"].$emit("history",s)},pushKey:function(t){this.$nextTick((function(){o["a"].$emit("push",t)}))},searchKey:function(t){var s=this;this.setHistory(t),this.hideList(),this.clearInp(),setTimeout((function(){s.pushKey(t)}),0),this.$router.push({path:"/composite/".concat(t)})},unique:function(t){if(Array.isArray(t))return t.filter((function(s,e){return t.indexOf(s)===e}));console.log("type error!")},beforeDestroy:function(){this.$Bus.$off("push","history")}}},c=r,u=(e("260f"),e("2877")),h=Object(u["a"])(c,i,n,!1,null,"8225f7a6",null);s["a"]=h.exports},ff96:function(t,s,e){"use strict";e("df01")}}]);
//# sourceMappingURL=group-searchPage.a205e8d3.js.map