webpackJsonp([5],{"4xu8":function(t,e,s){"use strict";function i(t){s("O2jV")}function n(t){s("x80+")}Object.defineProperty(e,"__esModule",{value:!0});var o=s("Dd8w"),a=s.n(o),r=s("woVd"),c=s("NYxO"),d=s("f0X5"),u=s("94d3"),l={name:"",mounted:function(){this.setLinkPage(),this.getKey()},computed:a()({},Object(c.c)({page:"LINK_PAGE"})),methods:{setLinkPage:function(){var t=this.$route.params.id;this.linkPage=t},getKey:function(){var t=this;d.a.$on("push",function(e){t.linkPage=e})},getPage:function(t){var e=this.toLink.indexOf(t);this.$refs.navs.handleScroll(e,85)}},watch:{linkPage:function(t){this.list=[{path:"/composite/"+t,text:"综合"},{path:"/song/"+t,text:"单曲"},{path:"/video/"+t,text:"视频"},{path:"/artist/"+t,text:"歌手"},{path:"/album/"+t,text:"专辑"},{path:"/playList/"+t,text:"歌单"},{path:"/djRadio/"+t,text:"主播电台"},{path:"/user/"+t,text:"用户"}]},page:function(t){this.getPage(t)}},data:function(){return{linkPage:"",list:[],toLink:["composite","song","video","artist","album","playList","djRadio","user"]}},components:{sliderNav:u.a}},h=function(){var t=this,e=t.$createElement;return(t._self._c||e)("slider-nav",{ref:"navs",attrs:{list:t.list}})},f=[],p={render:h,staticRenderFns:f},g=p,v=s("VU/8"),y=i,m=v(l,g,!1,y,"data-v-14d61016",null),w=m.exports,_={name:"searchResults",components:{searchInput:r.a,navList:w},data:function(){return{key:""}},watch:{$route:function(t,e){this.key=t.params.id}},computed:a()({},Object(c.c)({load:"LOAD"})),created:function(){this.setKey()},methods:{setKey:function(){this.key=this.$route.params.id}}},k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("search-input",{attrs:{keyword:t.key}}),t._v(" "),s("nav-list"),t._v(" "),s("router-view",{staticStyle:{height:"87vh","overflow-y":"scroll"},attrs:{keywords:t.key}})],1)},I=[],L={render:k,staticRenderFns:I},x=L,S=s("VU/8"),$=n,C=S(_,x,!1,$,"data-v-6bbba210",null);e.default=C.exports},"57/J":function(t,e,s){"use strict";function i(t){s("xxMI")}function n(t){s("mXEK")}Object.defineProperty(e,"__esModule",{value:!0});var o=s("ISPS"),a=s("dd/g"),r=s("mdS2"),c={name:"",props:{firstList:{type:Array},secondList:{type:Array},firstId:{type:String},secondId:{type:String}},computed:{_firstId:{get:function(){return this.firstId},set:function(t){this.$emit("update_firstID",t)}},_secondId:{get:function(){return this.secondId},set:function(t){this.$emit("update_secondID",t)}}},methods:{selectFirst:function(t){this._firstId=t},selectSecond:function(t){this._secondId=t}}},d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"list-wrap"},t._l(t.firstList,function(e){return s("li",{key:e.id,staticClass:"list-item",class:{active:e.id===t._firstId},on:{click:function(s){return t.selectFirst(e.id)}}},[t._v(t._s(e.text))])}),0),t._v(" "),s("ul",{staticClass:"list-wrap"},t._l(t.secondList,function(e){return s("li",{key:e.id,staticClass:"list-item",class:{active:e.id===t._secondId},on:{click:function(s){return t.selectSecond(e.id)}}},[t._v(t._s(e.text))])}),0)])},u=[],l={render:d,staticRenderFns:u},h=l,f=s("VU/8"),p=i,g=f(c,h,!1,p,"data-v-1a882c6e",null),v=g.exports,y=s("gyMJ"),m={name:"",data:function(){return{loading:!0,allArtistList:[],firstId:"10",secondId:"01",firstList:[{text:"华语",id:"10"},{text:"欧美",id:"20"},{text:"日本",id:"60"},{text:"韩国",id:"70"},{text:"其他",id:"40"}],secondList:[{text:"男",id:"01"},{text:"女",id:"02"},{text:"乐队/组合",id:"03"}]}},created:function(){this.load=!0,this._getSingerInfo(this.firstId,this.secondId)},mounted:function(){window.addEventListener("scroll",this.handleScroll,!0)},methods:{_getSingerInfo:function(t,e,s,i,n){var o=this,a=t+""+e;y.a.singerClassFn(a,s,i,n).then(function(t){var e=t.data;200===e.code&&(o.allArtistList=e.artists,o.loading=!1)})},updateFirst:function(t){this.firstId=t,this.changeId()},updateSecond:function(t){this.secondId=t,this.changeId()},changeId:function(){this.loading=!0,this._getSingerInfo(this.firstId,this.secondId)},returnPage:function(){this.$router.go(-1)}},components:{selectList:v,generalNav:o.a,artist:a.a,pageLoading:r.a}},w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"titleFixed"},[s("general-nav",{staticClass:"pd23",on:{returnPage:t.returnPage}},[s("span",{staticClass:"text"},[t._v("歌手分类")])]),t._v(" "),s("select-list",{staticClass:"pd23",attrs:{firstList:t.firstList,secondList:t.secondList,firstId:t.firstId,secondId:t.secondId},on:{"update:firstId":function(e){t.firstId=e},"update:first-id":function(e){t.firstId=e},"update:secondId":function(e){t.secondId=e},"update:second-id":function(e){t.secondId=e},update_firstID:t.updateFirst,update_secondID:t.updateSecond}})],1),t._v(" "),s("h1",{ref:"title",staticClass:"title pd23"},[t._v("热门歌手")]),t._v(" "),s("page-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),t._l(t.allArtistList,function(e,i){return s("artist",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],key:i,staticClass:"pd23",attrs:{circle:!0,ImgUrl:e.img1v1Url,name:e.name,isIn:e.accountId}})})],2)},_=[],k={render:w,staticRenderFns:_},I=k,L=s("VU/8"),x=n,S=L(m,I,!1,x,"data-v-8ba29ce6",null);e.default=S.exports},O2jV:function(t,e){},dgaH:function(t,e){},mXEK:function(t,e){},woVd:function(t,e,s){"use strict";function i(t){s("dgaH")}var n=s("gyMJ"),o=s("f0X5"),a={name:"searchInp",props:{page:{type:String},Right:{default:"0.23rem"},keyword:{type:String,default:""}},data:function(){return{searchList:[],keywords:"",showList:!1,history:[],time:null,placeholder:""}},created:function(){this.changFocus(),this._getPlaceholder(),this.historySearch(),this.setKeyword()},mounted:function(){this.getHistory()},watch:{keywords:function(t,e){if(this.keywords===this.keyword)return void this.hideList();this.keywords.length>0?this.displayList():this.hideList()},keyword:function(t,e){t&&(this.keywords=t)}},methods:{setKeyword:function(){this.keyword&&(this.keywords=this.keyword)},goSingerPage:function(){this.$router.push("/singer")},historySearch:function(){var t=this;o.a.$on("search",function(e){t.searchKey(e)})},clearInp:function(){this.keywords=""},changFocus:function(){var t=this;this.keyword||this.$nextTick(function(e){t.$refs.inp.focus()})},returnPage:function(){this.$router.go(-1)},_getPlaceholder:function(){var t=this;n.a.defaultSearchFn().then(function(e){var s=e.data;200===s.code&&(t.placeholder=s.data.showKeyword)})},hideList:function(){this.showList=!1},displayList:function(){this.keywords&&(this.showList=!0,this.setSearchList(this.keywords))},_getSuggestList:function(t){var e=this;n.a.suggestSearchFn(t).then(function(t){var s=t.data;200===s.code&&(e.searchList=s.result.allMatch)})},setSearchList:function(t){var e=this;this.time&&(clearTimeout(this.time),this.time=null),this.time=setTimeout(function(){e._getSuggestList(t)},50)},getHistory:function(t){var e=localStorage.getItem("keys")?localStorage.getItem("keys").split(","):[];t&&(e.unshift(t),e=this.unique(e),localStorage.setItem("keys",e)),this.history=e,o.a.$emit("history",this.history)},pushKey:function(t){this.$nextTick(function(){o.a.$emit("push",t)})},searchKey:function(t){var e=this;this.getHistory(t),this.hideList(),this.clearInp(),setTimeout(function(){e.pushKey(t)},0),this.$router.push({path:"/composite/"+t})},unique:function(t){return Array.isArray(t)?Array.prototype.filter.call(t,function(e,s){return t.indexOf(e)===s}):void console.log("type error!")},beforeDestroy:function(){this.$Bus.$off("push","history")}}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper pd23"},[s("i",{staticClass:"iconfont zuojiantou",on:{click:t.returnPage}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keywords,expression:"keywords",modifiers:{trim:!0}}],ref:"inp",staticClass:"search",attrs:{type:"text",placeholder:t.placeholder,autofocus:"autofocus"},domProps:{value:t.keywords},on:{focus:t.displayList,input:function(e){e.target.composing||(t.keywords=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.keywords,expression:"keywords"}],staticClass:"iconfont guanbi",style:{right:t.Right},on:{click:t.clearInp}}),t._v(" "),t.page?s("i",{staticClass:"iconfont geshou",on:{click:t.goSingerPage}}):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"floatInfo"},[s("ul",[s("li",{staticClass:"blue border-bottom",on:{click:function(e){return t.searchKey(t.keywords)}}},[t._v("\n        搜索\n        "),s("span",{staticClass:"text"},[t._v('"'+t._s(t.keywords)+'"')])]),t._v(" "),t._l(t.searchList,function(e,i){return s("li",{key:i,staticClass:"border-bottom",on:{click:function(s){return t.searchKey(e.keyword)}}},[s("i",{staticClass:"iconfont sousuo"}),t._v("\n        "+t._s(e.keyword)+"\n      ")])})],2)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"mask",on:{click:t.hideList}})])},c=[],d={render:r,staticRenderFns:c},u=d,l=s("VU/8"),h=i,f=l(a,u,!1,h,"data-v-4b6add30",null);e.a=f.exports},"x80+":function(t,e){},xxMI:function(t,e){}});
//# sourceMappingURL=5.d20a461464b4eb119cb4.js.map