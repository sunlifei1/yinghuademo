webpackJsonp([9],{"4FER":function(t,e,n){"use strict";function a(t){n("5GM0")}var i={name:"loginBtn",props:{title:{type:String,default:"下一步"}}},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn"},[n("button",{attrs:{id:"btn"}}),t._v(" "),n("label",{ref:"btnText",staticClass:"label",attrs:{for:"btn"}},[t._v(t._s(t.title))])])},r=[],s={render:o,staticRenderFns:r},l=s,c=n("VU/8"),u=a,d=c(i,l,!1,u,"data-v-ef41c79a",null);e.a=d.exports},"5GM0":function(t,e){},Fhvg:function(t,e,n){"use strict";function a(t){n("WBdd")}var i={name:"alert",props:{alert:{type:String},isAlert:{type:Boolean}}},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isAlert,expression:"isAlert"}],staticClass:"alert"},[t._v(t._s(t.alert))])])],1)},r=[],s={render:o,staticRenderFns:r},l=s,c=n("VU/8"),u=a,d=c(i,l,!1,u,"data-v-6389854b",null);e.a=d.exports},M8gZ:function(t,e,n){"use strict";function a(t){n("Xtw0")}function i(t){n("PgtU")}Object.defineProperty(e,"__esModule",{value:!0});var o=n("yG2O"),r=n("4FER"),s=n("Fhvg"),l={name:"alert",props:{isLoading:{type:Boolean}}},c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading"},[n("p")])])],1)},u=[],d={render:c,staticRenderFns:u},f=d,g=n("VU/8"),h=a,v=g(l,f,!1,h,"data-v-fcd16f1c",null),p=v.exports,m=n("gyMJ"),_=n("fukQ"),w={name:"phonePwd",data:function(){return{pwd:"",alert:!1,alertText:"用户名或密码错误",title:"登录",loading:!1,flag:!0}},components:{loginBtn:r.a,alert:s.a,loading:p,accountLogin:_.a},methods:{clearInput:function(){this.pwd=""},alertEvent:function(){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.alert=!0,this.timer=setTimeout(function(){t.alert=!1},1e3)},_getLoginState:function(){var t=this;m.a.loginStatusFn().then(function(e){var n=e.data.profile.userId;if(200===e.data.code){var a=e.data.profile;t.$store.commit("LOGIN_STATE",1),localStorage.setItem("loginState",1),localStorage.setItem("avatarUrl",a.avatarUrl),localStorage.setItem("nickname",a.nickname),t.$store.commit("ACCOUNT_UID",n),localStorage.setItem("accountUid",n),t._getUserDetail(n)}}).catch(function(t){console.log(t)})},goForget:function(){var t=Object(o.a)();this.$router.push("/verify?phone="+t)},_getUserDetail:function(t){var e=this;m.a.userDetailFn(t).then(function(t){var n=t.data;200===n.code&&(e.$store.commit("SET_LEVEL",n.level),localStorage.setItem("level",n.level),e.$router.push({path:"/find"}),console.log("跳转了"))})},passwordIsCorrect:function(t){t||(this.alertText="请输入密码",this.alertEvent());var e=Object(o.a)();this._isSure(e,t)},_isSure:function(t,e){var n=this;m.a.phoneLoginFn(t,e).then(function(e){console.log(e),200===e.data.code?(localStorage.setItem("account",t),n.success()):n.error(e.data.msg)}).catch(function(t){t&&n.error()})},success:function(){this.LoadingEnd(),this._getLoginState()},error:function(t){this.alertText=t||"用户名或密码错误",this.alertEvent(),this.clearInput(),this.LoadingEnd(),this.flag=!0},logon:function(){if(this.flag){if(!this.pwd)return this.alertText="请输入密码",void this.alertEvent();this.flag=!1,this.Loading(),this.passwordIsCorrect(this.pwd)}},LoadingEnd:function(){this.title="登录",this.loading=!1},Loading:function(){this.title="登录中...",this.loading=!0},changFocus:function(){var t=this;this.$nextTick(function(e){t.$refs.inputs.focus()})}},created:function(){this.changFocus()}},E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("account-login",[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"inp border-bottom"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],ref:"inputs",attrs:{type:"password",placeholder:"请输入密码",autofocus:"autofocus"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}}),t._v(" "),n("span",{on:{click:t.goForget}},[t._v("忘记密码")])]),t._v(" "),n("login-btn",{attrs:{title:t.title},nativeOn:{click:function(e){return t.logon(e)}}}),t._v(" "),n("alert",{attrs:{"is-alert":t.alert,alert:t.alertText}}),t._v(" "),n("loading",{attrs:{"is-loading":t.loading}})],1)])},x=[],S={render:E,staticRenderFns:x},b=S,F=n("VU/8"),L=i,I=F(w,b,!1,L,"data-v-15d31953",null);e.default=I.exports},PgtU:function(t,e){},WBdd:function(t,e){},Xtw0:function(t,e){},yG2O:function(t,e,n){"use strict";function a(){return new RegExp(/\d*$/).exec(window.location.hash)[0]}e.a=a}});
//# sourceMappingURL=9.e5bd1cd0b21b7ee3f8cc.js.map